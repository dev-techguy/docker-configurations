version: '3'

networks: 
  laravel:

services: 
  nginx:
  image: nginx:stable-alpine
  container_name: nginx
  ports: 
   - "8080:80"
  volumes:
    - ./src:/var/www/html
    - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
  depends_on: 
    - php
    - pgsql
    networks: 
     - laravel

  pgsql:
  image: postgres:13
  container_name: pgsql
  tty: true
  restart: unless-stopped
  ports: 
   - "5433:5432"
  volumes: ./pgsql:/var/lib/postgresql/data
  environment: 
     PGPASSWORD: ''
     POSTGRES_DB: ''
     POSTGRES_USER: ''
     POSTGRES_PASSWORD: ''
     SERVICE_NAME: pgsql
    networks: 
     - laravel

  php:
  build: 
    context: .
    dockerfile: Dockerfile
    container_name: php
    volumes: 
     - ./src:/var/www/html
    ports: 
     - '9000:9000'
    networks: 
     - laravel

